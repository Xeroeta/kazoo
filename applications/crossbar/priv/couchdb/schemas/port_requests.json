{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "_id": "port_requests",
    "description": "Schema for a port request",
    "properties": {
        "bill": {
            "description": "Billing information of the losing carrier",
            "properties": {
                "carrier": {
                    "description": "The name of the losing carrier",
                    "type": "string"
                },
                "extended_address": {
                    "description": "The suite/floor/apt of the billing address the losing carrier has on record",
                    "type": "string"
                },
                "locality": {
                    "description": "The locality (city) of the billing address the losing carrier has on record",
                    "type": "string"
                },
                "name": {
                    "description": "The losing carrier billing/account name",
                    "type": "string"
                },
                "postal_code": {
                    "description": "The zip/postal code of the billing address the losing carrier has on record",
                    "type": "string"
                },
                "region": {
                    "description": "The region (state) of the billing address the losing carrier has on record",
                    "type": "string"
                },
                "street_address": {
                    "description": "The street name of the billing address the losing carrier has on record",
                    "type": "string"
                },
                "street_number": {
                    "description": "The street number of the billing address the losing carrier has on record",
                    "type": "string"
                },
                "street_type": {
                    "description": "The street type of the billing address the losing carrier has on record",
                    "type": "string"
                }
            },
            "type": "object"
        },
        "comments": {
            "description": "The history of comments made on a port request",
            "items": {
                "oneOf": [
                    {
                        "required": [
                            "account_id",
                            "content",
                            "timestamp",
                            "user_id"
                        ]
                    },
                    {
                        "required": [
                            "author",
                            "content",
                            "timestamp"
                        ]
                    }
                ],
                "properties": {
                    "account_id": {
                        "description": "Account ID of the commenter.",
                        "type": "string"
                    },
                    "action_required": {
                        "default": false,
                        "description": "Specficied if an action is required by the port request sumbitter.",
                        "type": "boolean"
                    },
                    "author": {
                        "description": "Full name of the author",
                        "type": "string"
                    },
                    "content": {
                        "description": "Content of the comment",
                        "type": "string"
                    },
                    "is_private": {
                        "default": false,
                        "description": "Specified if this comment is private",
                        "type": "boolean"
                    },
                    "timestamp": {
                        "type": "integer"
                    },
                    "user_id": {
                        "description": "User ID of the commenter",
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "type": "array"
        },
        "name": {
            "description": "A friendly name for the port request",
            "maxLength": 128,
            "minLength": 1,
            "type": "string"
        },
        "notifications": {
            "description": "Status notifications",
            "properties": {
                "email": {
                    "description": "Inbound Email Notifications",
                    "properties": {
                        "send_to": {
                            "description": "A list or string of email recipient(s)",
                            "oneOf": [
                                {
                                    "format": "email",
                                    "type": "string"
                                },
                                {
                                    "items": {
                                        "format": "email",
                                        "type": "string"
                                    },
                                    "type": "array"
                                }
                            ]
                        }
                    },
                    "type": "object"
                }
            },
            "type": "object"
        },
        "numbers": {
            "description": "The numbers to port in",
            "minProperties": 1,
            "patternProperties": {
                "\\+?[0-9]+": {
                    "type": "object"
                }
            },
            "type": "object"
        },
        "port_state": {
            "default": "unconfirmed",
            "description": "What state the port request is currently in",
            "enum": [
                "unconfirmed",
                "pending",
                "submitted",
                "scheduled",
                "completed",
                "rejected",
                "canceled"
            ],
            "type": "string"
        },
        "signee_name": {
            "description": "The name of the person authorizing the release of numbers from the losing carrier",
            "type": "string"
        },
        "signing_date": {
            "description": "The date in Gregorian timestamp on which the document releasing the numbers from the losing carrier was signed",
            "type": "integer"
        },
        "transfer_date": {
            "description": "Requested transfer date in Gregorian timestamp",
            "type": "integer"
        }
    },
    "required": [
        "name",
        "numbers"
    ],
    "type": "object"
}
